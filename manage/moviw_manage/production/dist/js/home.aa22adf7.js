(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{2032:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-card",[i("el-input",{attrs:{width:"100px",placeholder:"请输入内容"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),i("el-button",{staticClass:"btn-search",attrs:{type:"primary"},on:{click:e.search}},[i("i",{staticClass:"el-icon-search"}),e._v(" 搜索")]),i("el-button",{staticClass:"btn-search",attrs:{type:"danger"},on:{click:e.clearSearchInput}},[i("i",{staticClass:" el-icon-delete"}),e._v(" 清空\n        ")])],1)],1)],1),i("el-card",{staticClass:"main_card"},[e._l(""==e.searchList?e.movieList:e.searchList,(function(t,a){return i("div",{key:a,staticClass:"box-2",on:{mouseenter:function(t){return t.stopPropagation(),e.boxEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.boxLeave(t)}}},[i("div",{staticClass:"imgheader",on:{click:function(i){return e.imgclick(t.movie_id)}}},[i("img",{attrs:{width:"100%",src:t.main_pic,alt:""}}),i("div",{staticClass:"order"},[e._v(e._s(t.d_order))])]),i("div",{staticClass:"info-header"},[e._v(e._s(t.movie_name))]),i("div",[i("div",{staticClass:"info-kps-price"},[i("div",{staticClass:"info-price"},[e._v("￥"+e._s(t.movie_price))]),i("el-rate",{staticClass:"info-kps",attrs:{value:t.kps/2,max:5,disabled:"","show-score":"","text-color":"#ff9900","score-template":String(t.kps)}})],1)]),i("div",{key:a,staticClass:"edit"},[i("el-button",{staticClass:"editDeleteBtn",attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.alertDialog(t)}}},[i("i",{staticClass:"el-icon-edit"}),e._v(" 编辑")]),i("el-button",{staticClass:"editDeleteBtn",attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.shutdownMovie(t,a)}}},[i("i",{staticClass:"el-icon-delete"}),e._v(" 下架")])],1)])})),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.nowPage,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2),i("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"diabox"},[i("el-form",{ref:"editInputRef",staticClass:"demo-ruleForm",attrs:{model:e.editInput,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"电影名称",prop:"movie_name"}},[i("el-input",{model:{value:e.editInput.movie_name,callback:function(t){e.$set(e.editInput,"movie_name",t)},expression:"editInput.movie_name"}})],1),i("el-form-item",{attrs:{label:"主图URL",prop:"main_pic"}},[i("el-input",{model:{value:e.editInput.main_pic,callback:function(t){e.$set(e.editInput,"main_pic",t)},expression:"editInput.main_pic"}})],1),i("el-form-item",{attrs:{label:"显示顺序",prop:"d_order"}},[i("el-select",{attrs:{placeholder:"请选择显示顺序"},model:{value:e.editInput.d_order,callback:function(t){e.$set(e.editInput,"d_order",t)},expression:"editInput.d_order"}},e._l(15,(function(e,t){return i("el-option",{key:t,attrs:{value:e}})})),1)],1),i("el-form-item",{attrs:{label:"电影类型",prop:"movie_type"}},[i("el-checkbox-group",{model:{value:e.editInput.movie_type,callback:function(t){e.$set(e.editInput,"movie_type",t)},expression:"editInput.movie_type"}},[i("el-checkbox",{attrs:{label:"爱情",name:"type",value:"爱情"}}),i("el-checkbox",{attrs:{label:"恐怖",name:"type"}}),i("el-checkbox",{attrs:{label:"童话",name:"type"}}),i("el-checkbox",{attrs:{label:"科幻",name:"type",value:"科幻"}}),i("el-checkbox",{attrs:{label:"穿越",name:"type"}}),i("el-checkbox",{attrs:{label:"冒险",name:"type"}}),i("el-checkbox",{attrs:{label:"动作",name:"type"}}),i("el-checkbox",{attrs:{label:"历史",name:"type"}}),i("el-checkbox",{attrs:{label:"剧情",name:"type"}}),i("el-checkbox",{attrs:{label:"浪漫",name:"type"}}),i("el-checkbox",{attrs:{label:"奇幻",name:"type"}}),i("el-checkbox",{attrs:{label:"战争",name:"type"}}),i("el-checkbox",{attrs:{label:"犯罪",name:"type"}}),i("el-checkbox",{attrs:{label:"纪录片",name:"type"}}),i("el-checkbox",{attrs:{label:"动画片",name:"type"}}),i("el-checkbox",{attrs:{label:"家庭",name:"type"}}),i("el-checkbox",{attrs:{label:"人物",name:"type"}}),i("el-checkbox",{attrs:{label:"喜剧",name:"type"}})],1)],1),i("el-form-item",{attrs:{label:"电影简介",prop:"movie_about"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.editInput.movie_about,callback:function(t){e.$set(e.editInput,"movie_about",t)},expression:"editInput.movie_about\n              "}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editInputRuls("editInputRef")}}},[e._v("确 定")])],1)])],1)},s=[],n={data(){var e=(e,t,i)=>{0==t.length&&i(new Error("请输入电影时长")),Number.isInteger(Number(t))?i():i(new Error("请输入数字类型"))},t=(e,t,i)=>{var a=/(http|https):\/\/.+(\.jpg|\.png)/gi;a.test(t)?i():i(new Error("请输入正确链接"))};return{nowPage:1,total:40,pageSize:10,movieList:"",searchList:"",searchInput:"",value:3.5,filterMovie:[],filterLength:Number(),dialogVisible:!1,editInput:{},rules:{movie_name:[{required:!0,message:"请输入电影名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],movie_type:[{type:"array",required:!0,message:"请至少选择一个电影类型",trigger:"change"}],movie_about:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:10,max:500,message:"长度在 10 到 500 个字符",trigger:"blur"}],time_length:[{validator:e,trigger:"blur"}],d_order:[{required:!0,message:"请选择显示顺序",trigger:"change"}],main_pic:[{validator:t,trigger:"blur"}]}}},methods:{imgclick(e){console.log(e)},async search(){if(""==this.searchInput)return this.$message.warning("请输入内容");let{data:e}=await this.$axios.get("/getinfo/search",{params:{movie_name:this.searchInput}});this.searchList=e.data,0==e.data.length&&this.$message.warning("没有哦亲"),console.log(this.searchList)},clearSearchInput(){this.searchList="",this.searchInput=""},async getMovieList(){let{data:e}=await this.$axios.get("/getinfo",{params:{nowPage:this.nowPage,pageSize:this.pageSize}});console.log(e),this.total=e.total,this.movieList=e.data},alertDialog(e){this.dialogVisible=!0,e.movie_type.constructor!=Array&&(e.movie_type=e.movie_type.split("/"),e.movie_type.forEach((t,i)=>{e.movie_type[i]=this.Trim(t)})),this.editInput=e},handleClose(e){this.$confirm("确认关闭？").then(t=>{e()}).catch(e=>{})},async shutdownMovie(e,t){let{data:i}=await this.$axios.post("/updateinfo/down",e);return 200!==i.meta.status?this.$message.error(i.meta.msg):(this.getMovieList(),this.$message.success(i.meta.msg))},handleSizeChange(e){this.pageSize=e,this.getMovieList()},handleCurrentChange(e){this.nowPage=e,this.getMovieList()},boxEnter(e){e.target.style.boxShadow="0px 0px 15px 0px rgb(0 0 0 / 50%)",e.target.children[3].style.transform="translateY(0px)"},boxLeave(e){e.target.style.boxShadow="3px 3px 10px #888888",e.target.children[3].style.transform="translateY(60px)"},editInputRuls(e){this.$refs[e].validate(async e=>{if(!e)return!1;{let{data:e}=await this.$axios.post("/updateinfo",{movie_info:this.editInput});if(200!==e.meta.status)return this.$message.error("修改失败");this.$message.success("修改成功"),this.getMovieList(),this.dialogVisible=!1}})},Trim(e){return e.replace(/(^\s*)|(\s*$)/g,"")}},computed:{},created(){this.getMovieList()},mounted(){this.getMovieList()}},o=n,l=(i("6ef9"),i("2877")),r=Object(l["a"])(o,a,s,!1,null,"0e7f8870",null);t["default"]=r.exports},"4fb0":function(e,t,i){},"6ef9":function(e,t,i){"use strict";i("7abd")},"7abd":function(e,t,i){},"7df3":function(e,t,i){"use strict";i("8e7d")},"8e7d":function(e,t,i){},c07f:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-card",[i("el-input",{attrs:{width:"100px",placeholder:"请输入内容"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),i("el-button",{staticClass:"btn-search",attrs:{type:"primary"},on:{click:e.search}},[i("i",{staticClass:"el-icon-search"}),e._v(" 搜索")]),i("el-button",{staticClass:"btn-search",attrs:{type:"danger"},on:{click:e.clearSearchInput}},[i("i",{staticClass:" el-icon-delete"}),e._v(" 清空\n        ")])],1)],1)],1),i("el-card",{staticClass:"main_card"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.movieList.length,expression:"movieList.length==0?true:false"}],staticClass:"listNull"},[e._v("\n        无\n    ")]),e._l(""==e.searchList?e.movieList:e.searchList,(function(t,a){return i("div",{key:a,staticClass:"box-2",on:{mouseenter:function(t){return t.stopPropagation(),e.boxEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.boxLeave(t)}}},[i("div",{staticClass:"imgheader",on:{click:function(i){return e.imgclick(t.movie_id)}}},[i("img",{attrs:{width:"100%",src:t.main_pic,alt:""}})]),i("div",{staticClass:"info-header"},[e._v(e._s(t.movie_name))]),i("div",[i("div",{staticClass:"info-kps-price"},[i("div",{staticClass:"info-price"},[e._v("￥"+e._s(t.movie_price))]),i("el-rate",{staticClass:"info-kps",attrs:{value:t.kps/2,max:5,disabled:"","show-score":"","text-color":"#ff9900","score-template":String(t.kps)}})],1)]),i("div",{key:a,staticClass:"edit"},[i("el-button",{staticClass:"editDeleteBtn",attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.alertDialog(t.movie_id)}}},[i("i",{staticClass:"el-icon-edit"}),e._v(" 编辑")]),i("el-button",{staticClass:"editDeleteBtn",attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.upMovie(t,a)}}},[i("i",{staticClass:"el-icon-delete"}),e._v("上架")])],1)])})),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.nowPage,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2),i("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"100%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"diabox"}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"上架信息",visible:e.updialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.updialogVisible=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"上映价格",prop:"price"}},[i("el-input-number",{attrs:{precision:2,step:.1,max:500},model:{value:e.upMovieForm.price,callback:function(t){e.$set(e.upMovieForm,"price",t)},expression:"upMovieForm.price"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.updialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.upAddFinish}},[e._v("确 定")])],1)],1)],1)},s=[],n={data(){return{nowPage:1,total:40,pageSize:10,movieList:[],searchList:"",searchInput:"",value:3.5,filterMovie:[],filterLength:Number(),dialogVisible:!1,updialogVisible:!1,upMovieForm:{movie_id:"",price:Number()},rules:{m_rid:[{type:"number",required:!0,message:"请输入电影价格",trigger:"change"}]}}},methods:{imgclick(e){console.log(e)},async search(){if(""==this.searchInput)return this.$message.warning("请输入内容");let{data:e}=await this.$axios.get("/getinfo/searchLeave",{params:{movie_name:this.searchInput}});this.searchList=e.data,0==e.data.length&&this.$message.warning("没有哦亲"),console.log(this.searchList)},clearSearchInput(){this.searchList="",this.searchInput=""},async getMovieList(){let{data:e}=await this.$axios.get("/getinfo/leave",{params:{nowPage:this.nowPage,pageSize:this.pageSize}});console.log(e),this.total=e.total,this.movieList=e.data},alertDialog(e){this.dialogVisible=!0,console.log(e)},handleClose(e){this.$confirm("确认关闭？").then(t=>{e()}).catch(e=>{})},upMovie(e,t){this.upMovieForm.movie_id=e.movie_id,this.updialogVisible=!0},async upAddFinish(){let{data:e}=await this.$axios.post("/updateinfo/up",this.upMovieForm);return 200!==e.meta.status?this.$message.error(e.meta.msg):(this.getMovieList(),this.updialogVisible=!1,this.$message.success(e.meta.msg))},handleSizeChange(e){this.pageSize=e,this.getMovieList()},handleCurrentChange(e){this.nowPage=e,this.getMovieList()},boxEnter(e){e.target.style.boxShadow="0px 0px 15px 0px rgb(0 0 0 / 50%)",e.target.children[3].style.transform="translateY(0px)"},boxLeave(e){e.target.style.boxShadow="3px 3px 10px #888888",e.target.children[3].style.transform="translateY(60px)"}},computed:{},created(){this.getMovieList()},mounted(){this.getMovieList()}},o=n,l=(i("ecd2"),i("2877")),r=Object(l["a"])(o,a,s,!1,null,"55ce47fd",null);t["default"]=r.exports},c3b0:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("el-container",[i("el-header",[i("div",{staticClass:"headerBox"},[i("div",{staticClass:"imgRound"},[i("ul",{staticClass:"uls"},[i("div",{staticClass:"headPhoto"},[i("img",{staticStyle:{height:"50px"},attrs:{width:"100%",src:"img/ikon.png",alt:""}})]),i("li",{on:{click:e.exit}},[e._v("退出登录")])])])])]),i("el-container",[i("el-aside",{attrs:{width:"",height:"100%"}},[i("div",{staticClass:"menuBox"},[i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","unique-opened":"","default-active":e.menuIndex?e.menuIndex:"now",collapse:e.isno},on:{select:e.selectMenu}},[e.isno?i("el-button",{staticStyle:{width:"100%"},on:{click:e.swich}},[e._v("展开")]):e._e(),e.isno?e._e():i("el-button",{staticStyle:{width:"100%"},on:{click:e.swich}},[e._v("收起")]),i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-menu"}),i("span",[e._v("电影信息")])]),i("el-menu-item",{attrs:{index:"now"},on:{click:function(t){return e.reindex("now")}}},[i("i",{staticClass:"el-icon-huo iconfont"}),e._v("正在热映\n              ")]),i("el-menu-item",{attrs:{index:"leave"},on:{click:function(t){return e.reindex("leave")}}},[i("i",{staticClass:"aliIcon el-icon-xiajia iconfont"}),e._v(" 以下架")])],2),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-dianying iconfont aliIcon"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("电影管理")])]),i("el-menu-item",{attrs:{index:"addinfo"},on:{click:function(t){return e.reindex("addinfo")}}},[i("i",{staticClass:"aliIcon iconfont el-icon-tianjia"}),e._v(" 添加影片\n              ")]),i("el-menu-item",{attrs:{index:"addplay"},on:{click:function(t){return e.reindex("addplay")}}},[i("i",{staticClass:"el-icon-wode iconfont aliIcon"}),e._v("\n                添加人员")]),i("el-menu-item",{attrs:{index:"moviedetail"},on:{click:function(t){return e.reindex("moviedetail")}}},[i("i",{staticClass:"el-icon-bianji iconfont aliIcon"}),e._v("\n                编辑信息")])],2),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[i("i",{staticClass:"aliIcon iconfont el-icon-huiyishi"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("影厅管理")])]),i("el-menu-item",{attrs:{index:"room"},on:{click:function(t){return e.reindex("room")}}},[i("i",{staticClass:"aliIcon iconfont el-icon-tianjia"}),e._v("\n                添加影厅\n                ")])],2),i("el-submenu",{attrs:{index:"4"}},[i("template",{slot:"title"},[i("i",{staticClass:"aliIcon iconfont el-icon-richenganpai"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("排片管理")])]),i("el-menu-item",{attrs:{index:"schedule"},on:{click:function(t){return e.reindex("schedule")}}},[i("i",{staticClass:"aliIcon iconfont el-icon-tianjia"}),e._v("\n                添加排片\n                ")])],2)],1)],1)]),i("el-main",[i("router-view",[i("movieinfo")],1)],1)],1)],1)],1)},s=[],n={data(){return{isno:!1,menuIndex:""}},methods:{selectMenu(e){console.log(e)},swich:function(){this.isno=!this.isno,console.log(this.isno),1==this.isno&&(this.bgmenu="red"),0==this.isno&&(this.bgmenu="pink")},reindex(e){window.sessionStorage.setItem("menuIndex",e)},exit(){window.sessionStorage.clear("token"),this.$router.push("/login"),this.$notify.success("已退出")}},created(){this.menuIndex=window.sessionStorage.getItem("menuIndex")}},o=n,l=(i("7df3"),i("2877")),r=Object(l["a"])(o,a,s,!1,null,null,null);t["default"]=r.exports},ecd2:function(e,t,i){"use strict";i("4fb0")}}]);
//# sourceMappingURL=home.aa22adf7.js.map